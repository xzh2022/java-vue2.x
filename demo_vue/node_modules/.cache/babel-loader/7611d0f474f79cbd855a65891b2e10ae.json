{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport axios from \"axios\";\nimport router from \"./router\";\nimport Element from \"element-ui\"; //此处会出现跨域问题\n\naxios.defaults.baseURL = \"http://localhost:8081\";\nvar request = axios.create({\n  timeout: 5000,\n  headers: {\n    'Content-Type': \"application/json; charset=utf-8\"\n  }\n});\nrequest.interceptors.request.use(function (config) {\n  config.headers['Authorization'] = localStorage.getItem(\"token\");\n  return config;\n});\nrequest.interceptors.response.use(function (response) {\n  var res = response.data;\n\n  if (res.code === 200) {\n    return response;\n  } else {\n    Element.Message.error(!res.msg ? '系统异常' : res.msg);\n    return Promise.reject(response.data.msg);\n  }\n}, function (error) {\n  if (error.response.data) {\n    error.message = error.response.data.msg;\n  }\n\n  if (error.response.status === 401) {\n    router.push(\"/login\");\n  }\n\n  Element.Message.error(error.message, {\n    duration: 3000\n  });\n  return Promise.reject(error);\n});\nexport default request;","map":{"version":3,"names":["axios","router","Element","defaults","baseURL","request","create","timeout","headers","interceptors","use","config","localStorage","getItem","response","res","data","code","Message","error","msg","Promise","reject","message","status","push","duration"],"sources":["D:/LenovoSoftstore/Install/vue/demo_vue/src/axios.js"],"sourcesContent":["import axios from \"axios\";\r\nimport router from \"./router\";\r\nimport Element from \"element-ui\";\r\n\r\n//此处会出现跨域问题\r\naxios.defaults.baseURL = \"http://localhost:8081\"\r\n\r\nconst request = axios.create({\r\n    timeout: 5000,\r\n    headers:{\r\n        'Content-Type': \"application/json; charset=utf-8\"\r\n    }\r\n})\r\n\r\nrequest.interceptors.request.use(config => {\r\n    config.headers['Authorization'] = localStorage.getItem(\"token\")\r\n    return config\r\n})\r\n\r\nrequest.interceptors.response.use(response => {\r\n        let res = response.data\r\n\r\n        if (res.code === 200) {\r\n            return response\r\n        } else {\r\n            Element.Message.error(!res.msg ? '系统异常' : res.msg)\r\n            return Promise.reject(response.data.msg)\r\n        }\r\n    }, error => {\r\n\r\n        if(error.response.data){\r\n            error.message = error.response.data.msg\r\n\r\n        }\r\n        if(error.response.status === 401){\r\n            router.push(\"/login\")\r\n        }\r\n\r\n        Element.Message.error(error.message, {duration: 3000})\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\nexport default request\r\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,OAAP,MAAoB,YAApB,C,CAEA;;AACAF,KAAK,CAACG,QAAN,CAAeC,OAAf,GAAyB,uBAAzB;AAEA,IAAMC,OAAO,GAAGL,KAAK,CAACM,MAAN,CAAa;EACzBC,OAAO,EAAE,IADgB;EAEzBC,OAAO,EAAC;IACJ,gBAAgB;EADZ;AAFiB,CAAb,CAAhB;AAOAH,OAAO,CAACI,YAAR,CAAqBJ,OAArB,CAA6BK,GAA7B,CAAiC,UAAAC,MAAM,EAAI;EACvCA,MAAM,CAACH,OAAP,CAAe,eAAf,IAAkCI,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAlC;EACA,OAAOF,MAAP;AACH,CAHD;AAKAN,OAAO,CAACI,YAAR,CAAqBK,QAArB,CAA8BJ,GAA9B,CAAkC,UAAAI,QAAQ,EAAI;EACtC,IAAIC,GAAG,GAAGD,QAAQ,CAACE,IAAnB;;EAEA,IAAID,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;IAClB,OAAOH,QAAP;EACH,CAFD,MAEO;IACHZ,OAAO,CAACgB,OAAR,CAAgBC,KAAhB,CAAsB,CAACJ,GAAG,CAACK,GAAL,GAAW,MAAX,GAAoBL,GAAG,CAACK,GAA9C;IACA,OAAOC,OAAO,CAACC,MAAR,CAAeR,QAAQ,CAACE,IAAT,CAAcI,GAA7B,CAAP;EACH;AACJ,CATL,EASO,UAAAD,KAAK,EAAI;EAER,IAAGA,KAAK,CAACL,QAAN,CAAeE,IAAlB,EAAuB;IACnBG,KAAK,CAACI,OAAN,GAAgBJ,KAAK,CAACL,QAAN,CAAeE,IAAf,CAAoBI,GAApC;EAEH;;EACD,IAAGD,KAAK,CAACL,QAAN,CAAeU,MAAf,KAA0B,GAA7B,EAAiC;IAC7BvB,MAAM,CAACwB,IAAP,CAAY,QAAZ;EACH;;EAEDvB,OAAO,CAACgB,OAAR,CAAgBC,KAAhB,CAAsBA,KAAK,CAACI,OAA5B,EAAqC;IAACG,QAAQ,EAAE;EAAX,CAArC;EACA,OAAOL,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACH,CArBL;AAwBA,eAAed,OAAf"},"metadata":{},"sourceType":"module"}